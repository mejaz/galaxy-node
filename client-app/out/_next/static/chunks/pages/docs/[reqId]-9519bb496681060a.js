(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[704],{4977:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/[reqId]",function(){return r(206)}])},3850:function(e,n,r){"use strict";r.d(n,{Z:function(){return l}});var t=r(5893);r(7294);var i=r(9837),a=r(9742),o=r(1359);function l(e){var n=e.title,r=e.children;return(0,t.jsxs)(i.Z,{sx:{width:"100%",pt:3},elevation:0,children:[(0,t.jsx)(a.Z,{title:n,sx:{color:"secondary.light"}}),(0,t.jsx)(o.Z,{sx:{width:"100%"},children:r})]})}r(2350),r(2697),r(3495),r(6186),r(7986),r(1281)},1397:function(e,n,r){"use strict";r.d(n,{Z:function(){return s}});var t=r(5893);r(7294);var i=r(4288),a=r(9008),o=r.n(a),l=r(9072);function s(e){var n=e.pageTitle,r=e.children,a=e.sideComponent;return(0,t.jsxs)(i.Z,{maxWidth:"xxl",children:[(0,t.jsxs)(o(),{children:[(0,t.jsx)("title",{children:n}),(0,t.jsx)("meta",{name:"description",content:"Office home"})]}),(0,t.jsxs)(l.ZP,{container:!0,children:[(0,t.jsx)(l.ZP,{item:!0,xs:12,md:12,lg:9,children:r}),(0,t.jsx)(l.ZP,{item:!0,xs:12,md:12,lg:3,children:void 0===a?null:a})]})]})}},3495:function(e,n,r){"use strict";r.d(n,{Z:function(){return x}});var t=r(6042),i=r(5893);r(7294);var a=r(5343),o=r(7836),l=r(7536),s=r(2359),d=r(3436),c=r(1092),u=r(7424);function x(e){var n,r=e.id,x=e.label,h=e.control,j=e.minDate,v=e.maxDate,m=e.errors,Z=e.isRequired,f=e.defaultValue,p=e.disabled,g=void 0!==p&&p;return(0,i.jsxs)(a.Z,{variant:"standard",children:[(0,i.jsx)(l.Qr,{control:h,name:r,rules:{required:Z},defaultValue:void 0===f?"":f,render:function(e){var n=e.field,r=n.onChange,a=n.value;return(0,i.jsx)(s._,{dateAdapter:c.Z,children:(0,i.jsx)(d.$,{disabled:g,label:x,inputFormat:"dd/MM/yyyy",value:a,onChange:r,minDate:j,maxDate:v,renderInput:function(e){return(0,i.jsx)(o.Z,(0,t.Z)({required:Z,sx:{marginTop:"1px !important",marginBottom:"0px !important"},variant:"standard"},e))}})})}}),(null===(n=m[r])||void 0===n?void 0:n.type)==="required"&&(0,i.jsx)(u.Z,{text:"".concat(x," is Required")})]})}},7986:function(e,n,r){"use strict";r.d(n,{Z:function(){return d}});var t=r(5893);r(7294);var i=r(5343),a=r(8316),o=r(6480),l=r(7424),s=r(7536);function d(e){var n,r,d=e.id,c=e.label,u=e.isRequired,x=e.maxLength,h=e.control,j=e.errors,v=e.defaultValue;return(0,t.jsxs)(i.Z,{variant:"standard",children:[(0,t.jsx)(a.Z,{htmlFor:d,required:u,children:c}),(0,t.jsx)(s.Qr,{name:d,control:h,rules:{required:u,maxLength:x},defaultValue:void 0===v?"":v,render:function(e){var n=e.field,r=n.onBlur,i=n.onChange,a=n.value;return(0,t.jsx)(o.Z,{id:d,value:a,onBlur:r,onChange:i})}}),(null===(n=j[d])||void 0===n?void 0:n.type)==="required"&&(0,t.jsx)(l.Z,{text:"".concat(c," is Required")}),(null===(r=j[d])||void 0===r?void 0:r.type)==="maxLength"&&(0,t.jsx)(l.Z,{text:"Cannot be more than ".concat(x," chars")})]})}},2350:function(e,n,r){"use strict";r.d(n,{Z:function(){return c}});var t=r(5893);r(7294);var i=r(5343),a=r(8316),o=r(6480),l=r(2631),s=r(7424),d=r(7536);function c(e){var n,r,c=e.id,u=e.label,x=e.isRequired,h=e.maxLength,j=e.control,v=e.errors,m=e.defaultValue,Z=e.disable,f=void 0!==Z&&Z,p=e.placeholder,g=void 0===p?"":p,y=e.helperText,b=void 0===y?"":y;return(0,t.jsxs)(i.Z,{variant:"standard",children:[(0,t.jsx)(a.Z,{htmlFor:c,required:x,children:u}),(0,t.jsx)(d.Qr,{name:c,control:j,rules:{required:x,maxLength:h},defaultValue:void 0===m?"":m,render:function(e){var n=e.field,r=n.onBlur,i=n.onChange,a=n.value;return(0,t.jsx)(o.Z,{id:c,value:a,onBlur:r,onChange:i,disabled:f,placeholder:g})}}),b&&(0,t.jsx)(l.Z,{id:"filled-weight-helper-text",children:b}),v&&(null===(n=v[c])||void 0===n?void 0:n.type)==="required"&&(0,t.jsx)(s.Z,{text:"".concat(u," is Required")}),v&&(null===(r=v[c])||void 0===r?void 0:r.type)==="maxLength"&&(0,t.jsx)(s.Z,{text:"Cannot be more than ".concat(h," chars")})]})}},6186:function(e,n,r){"use strict";r.d(n,{Z:function(){return c}});var t=r(5893);r(7294);var i=r(5343),a=r(8316),o=r(6480),l=r(9041),s=r(7424),d=r(7536);function c(e){var n,r,c,u=e.id,x=e.label,h=e.isRequired,j=e.maxLength,v=e.control,m=e.errors,Z=e.defaultValue,f=e.adornVal,p=void 0===f?"":f;return(0,t.jsxs)(i.Z,{variant:"standard",children:[(0,t.jsx)(a.Z,{htmlFor:u,required:h,children:x}),(0,t.jsx)(d.Qr,{name:u,control:v,rules:{required:h,maxLength:j,validate:{isDigits:function(e){return!e||/^\d+$/.test(e)}}},defaultValue:void 0===Z?"":Z,render:function(e){var n=e.field,r=n.onBlur,i=n.onChange,a=n.value;return(0,t.jsx)(o.Z,{id:u,value:a,onBlur:r,onChange:i,startAdornment:(0,t.jsx)(l.Z,{position:"start",children:p})})}}),(null===(n=m[u])||void 0===n?void 0:n.type)==="required"&&(0,t.jsx)(s.Z,{text:"".concat(x," is Required")}),(null===(r=m[u])||void 0===r?void 0:r.type)==="maxLength"&&(0,t.jsx)(s.Z,{text:"Cannot be more than ".concat(j," chars")}),(null===(c=m[u])||void 0===c?void 0:c.type)==="isDigits"&&(0,t.jsx)(s.Z,{text:"Only digits allowed"})]})}},2697:function(e,n,r){"use strict";r.d(n,{Z:function(){return c}});var t=r(5893);r(7294);var i=r(5343),a=r(8316),o=r(6541),l=r(7424),s=r(7536),d=r(1538);function c(e){var n,r=e.id,c=e.label,u=e.isRequired,x=e.values,h=e.control,j=e.errors,v=e.valKey,m=void 0===v?"key":v,Z=e.valLabel,f=void 0===Z?"label":Z,p=e.isReadOnly,g=void 0!==p&&p,y=e.defaultValue,b=e.additionalOnChange,C=void 0===b?null:b,q=e.emptyLabel,D=void 0===q?null:q;return(0,t.jsxs)(i.Z,{variant:"standard",sx:{m:1,minWidth:120},children:[(0,t.jsx)(a.Z,{shrink:!0,id:r,required:u,children:c}),(0,t.jsx)(s.Qr,{name:r,control:h,rules:{required:u},defaultValue:void 0===y?"":y,render:function(e){var n=e.field,i=n.onChange,a=(n.onBlur,n.value);return(0,t.jsxs)(o.Z,{id:r,value:a,displayEmpty:!0,onChange:function(e){C?(i(e),C(e.target.value)):i(e)},disabled:g,children:[(0,t.jsx)(d.Z,{value:"",children:(0,t.jsx)("em",{children:D||"Select"})}),x&&x.map(function(e){return(0,t.jsx)(d.Z,{value:e[m],children:e[f]},e[m])})]})}}),(null===(n=j[r])||void 0===n?void 0:n.type)==="required"&&(0,t.jsx)(l.Z,{text:"".concat(c," is Required")})]})}},7424:function(e,n,r){"use strict";r.d(n,{Z:function(){return o}});var t=r(5893);r(7294);var i=r(9630),a=r(1953);function o(e){var n=e.text;return(0,t.jsx)(i.Z,{component:"span",children:(0,t.jsx)(a.Z,{sx:{color:"error.main",fontSize:"12px",paddingTop:"1px"},children:n})})}},206:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return W}});var t=r(5893),i=r(7294),a=r(1163),o=r(7568),l=r(603),s=r(655),d=r(1953),c=r(9072),u=r(9630),x=r(4373),h=r(2135),j=r(4225),v=r(3850),m=r(918),Z=r(5056),f=r(3441),p=r(1733),g=r(1023),y=r(7836),b=r(1890),C=r(6779),q=r(5398),D=r(4642),k=r(7745);function w(e){var n=e.open,r=e.toggleOpen,a=e.deleteDocument,o=(0,l.Z)(i.useState(!0),2),s=o[0],d=o[1],c=function(e){"delete"===e.target.value?d(!1):d(!0)};return(0,t.jsxs)(b.Z,{open:n,onClose:r,children:[(0,t.jsx)(k.Z,{children:"Delete Document"}),(0,t.jsx)(x.Z,{}),(0,t.jsxs)(q.Z,{children:[(0,t.jsx)(D.Z,{color:"error.main",children:'Document once deleted cannot be restored. Type "delete" below and click the DELETE button to continue, else click cancel.'}),(0,t.jsx)(y.Z,{autoFocus:!0,margin:"dense",id:"confirm",type:"text",fullWidth:!0,variant:"standard",placeholder:"delete",onChange:c,sx:{mt:2}})]}),(0,t.jsxs)(C.Z,{sx:{p:2},children:[(0,t.jsx)(j.Z,{onClick:r,children:"Cancel"}),(0,t.jsx)(j.Z,{variant:"contained",onClick:a,disabled:s,children:"Delete"})]})]})}var T=r(8749),E=r(6042),I=r(9396),S=r(2631),_=r(6480),B=r(7536),L=r(7424),P=r(1812);function R(e){var n,r,i=e.open,a=e.toggleOpen,o=e.name,l=e.title,s=e.allowedExt,c=e.handleUpload,u=e.loading,h=(0,B.cI)(),v=h.register,m=h.handleSubmit,Z=h.formState.errors;return(0,t.jsxs)(b.Z,{open:i,onClose:a,children:[(0,t.jsx)(k.Z,{children:l}),(0,t.jsx)(x.Z,{}),(0,t.jsxs)(d.Z,{component:"form",enctype:"multipart/form-data",onSubmit:m(c),children:[(0,t.jsxs)(q.Z,{children:[(0,t.jsx)(D.Z,{children:"Choose the signed document to upload"}),(0,t.jsxs)(S.Z,{sx:{color:"error.main"},children:["Only ",s.join(", ")," ext allowed"]}),(0,t.jsxs)(d.Z,{sx:{pt:2},children:[(0,t.jsx)(_.Z,(0,I.Z)((0,E.Z)({},v(o,{required:!0,validate:{fileType:function(e){return!!s.includes(".".concat(e[0].name.split(".").reverse()[0]))||"File ext not supported"}}})),{type:"file",disableUnderline:!0})),Z&&(null===(n=Z[o])||void 0===n?void 0:n.type)==="required"&&(0,t.jsx)(L.Z,{text:"File is Required"}),Z&&(null===(r=Z[o])||void 0===r?void 0:r.type)==="fileType"&&(0,t.jsx)(L.Z,{text:Z[o].message})]})]}),(0,t.jsxs)(C.Z,{sx:{p:2},children:[(0,t.jsx)(j.Z,{onClick:a,size:"small",children:"Cancel"}),(0,t.jsx)(P.Z,{loading:u,variant:"contained",type:"submit",size:"small",children:"Upload"})]})]})]})}var O=r(381),z=r.n(O),F=r(3162),N=function(e){var n=e.children;return(0,t.jsx)(d.Z,{sx:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",my:2},children:n})};function V(e){var n,r,y,b=e.title,C=e.details,q=(0,a.useRouter)(),D={Authorization:"Bearer ".concat(localStorage.getItem("galaxy-token")),"Content-type":"application/json"},k={Authorization:"Bearer ".concat(localStorage.getItem("galaxy-token"))},E=q.query.reqId,I=(0,l.Z)(i.useState(!1),2),S=I[0],_=I[1],B=(0,l.Z)(i.useState(!1),2),L=B[0],P=B[1],O=(0,l.Z)(i.useState(!1),2),V=O[0],U=O[1],A=(0,l.Z)(i.useState(Boolean(C.isSigned)),2),M=A[0],Q=A[1],Y=(n=(0,o.Z)(function(){var e;return(0,s.__generator)(this,function(n){switch(n.label){case 0:return[4,fetch("/api/docs/".concat(E),{method:"DELETE",headers:D})];case 1:if(!(e=n.sent()).ok)return[3,3];return P(!1),[4,q.replace("/dashboard")];case 2:return n.sent(),[3,5];case 3:return P(!1),[4,e.json()];case 4:alert((e=n.sent()).message),n.label=5;case 5:return[2]}})}),function(){return n.apply(this,arguments)}),W=(r=(0,o.Z)(function(e){var n,r;return(0,s.__generator)(this,function(r){switch(r.label){case 0:return _(!0),(n=new FormData).append("docType",C.docType),n.append("file",e.signedFile[0]),[4,fetch("/api/docs/".concat(E,"/upload"),{method:"POST",body:n,headers:k})];case 1:return r.sent().ok?(U(!1),Q(!0)):alert("error"),_(!1),[2]}})}),function(e){return r.apply(this,arguments)}),X=function(){P(function(e){return!e})},$=function(){U(function(e){return!e})},G=(y=(0,o.Z)(function(e){var n,r,t;return(0,s.__generator)(this,function(r){switch(r.label){case 0:return[4,fetch("/api/docs/".concat(E,"/download/?signed=").concat(e),{headers:D})];case 1:if(!(n=r.sent()).ok)return[3,3];return t=n.headers.get("Content-Disposition").split("filename=").pop(),[4,n.blob()];case 2:n=r.sent(),F.saveAs(n,t),r.label=3;case 3:return[2]}})}),function(e){return y.apply(this,arguments)});return(0,t.jsx)(v.Z,{title:b,children:(0,t.jsxs)(d.Z,{sx:{mb:"0","& .MuiFormControl-root":{margin:"10px 0",width:"100%"}},noValidate:!0,autoComplete:"off",children:[(0,t.jsxs)(c.ZP,{container:!0,columnSpacing:4,children:[(0,t.jsxs)(c.ZP,{item:!0,xs:12,md:6,children:[(0,t.jsxs)(N,{children:[(0,t.jsx)(u.Z,{variant:"body1",color:"info.light",children:"Document Number"}),(0,t.jsx)(u.Z,{variant:"body1",children:C.docNo})]}),(0,t.jsx)(x.Z,{}),(0,t.jsxs)(N,{children:[(0,t.jsx)(u.Z,{variant:"body1",color:"info.light",children:"Document Type"}),(0,t.jsx)(u.Z,{variant:"body1",children:C.docType})]}),(0,t.jsx)(x.Z,{}),(0,t.jsxs)(N,{children:[(0,t.jsx)(u.Z,{variant:"body1",color:"info.light",children:"Issued On"}),(0,t.jsx)(u.Z,{variant:"body1",children:z()(C.issuedOn).format("DD-MMM-YYYY")})]}),(0,t.jsx)(x.Z,{}),(0,t.jsxs)(N,{children:[(0,t.jsx)(u.Z,{variant:"body1",color:"info.light",children:"Issued By"}),(0,t.jsx)(u.Z,{variant:"body1",children:C.issuedBy.lastName})]})]}),(0,t.jsx)(c.ZP,{item:!0,xs:12,md:6,children:(0,t.jsxs)(m.Z,{sx:{py:1,px:2},elevation:5,children:[(0,t.jsxs)(N,{children:[(0,t.jsx)(u.Z,{variant:"overline",children:"Signed Document"}),M?(0,t.jsx)(h.Z,{size:"small","aria-label":"small button group",children:[(0,t.jsx)(j.Z,{size:"small",variant:"outlined",color:"info",startIcon:(0,t.jsx)(T.Z,{}),onClick:function(){return $()},children:"Upload"}),(0,t.jsx)(j.Z,{size:"small",variant:"contained",color:"success",startIcon:(0,t.jsx)(f.Z,{}),onClick:function(){return G(!0)},children:"Download"})]}):(0,t.jsx)(j.Z,{size:"small",variant:"contained",color:"success",startIcon:(0,t.jsx)(T.Z,{}),onClick:function(){return $()},children:"Upload"})]}),(0,t.jsx)(x.Z,{}),(0,t.jsxs)(N,{children:[(0,t.jsx)(u.Z,{variant:"overline",children:"Un-signed Document"}),(0,t.jsx)(j.Z,{size:"small",variant:"contained",color:"warning",startIcon:(0,t.jsx)(Z.Z,{}),onClick:M?function(){return alert("Document is already signed")}:function(){return G(!1)},disabled:M,children:"Download"})]}),(0,t.jsx)(x.Z,{}),(0,t.jsxs)(N,{children:[(0,t.jsx)(u.Z,{variant:"overline",color:"error.main",children:"Delete Document"}),(0,t.jsx)(j.Z,{size:"small",variant:"contained",color:"error",startIcon:(0,t.jsx)(p.Z,{}),onClick:function(){return X()},children:"Delete"})]})]})})]}),(0,t.jsx)(x.Z,{}),(0,t.jsxs)(c.ZP,{container:!0,columnSpacing:4,children:[(0,t.jsx)(c.ZP,{item:!0,xs:12,md:12,sx:{mt:3,mb:1},children:(0,t.jsx)(u.Z,{variant:"overline",color:"secondary",children:"Issued To"})}),(0,t.jsxs)(c.ZP,{item:!0,xs:12,md:6,children:[(0,t.jsxs)(N,{children:[(0,t.jsx)(u.Z,{variant:"body1",color:"info.light",children:"Employee Id"}),(0,t.jsx)(u.Z,{variant:"body1",children:C.issuedTo.empId})]}),(0,t.jsx)(x.Z,{})]}),(0,t.jsxs)(c.ZP,{item:!0,xs:12,md:6,children:[(0,t.jsxs)(N,{children:[(0,t.jsx)(u.Z,{variant:"body1",color:"info.light",children:"Employee Name"}),(0,t.jsx)(u.Z,{variant:"body1",children:"".concat(C.issuedTo.firstName," ").concat(C.issuedTo.lastName)})]}),(0,t.jsx)(x.Z,{})]}),(0,t.jsx)(c.ZP,{item:!0,xs:12,md:6,children:(0,t.jsxs)(N,{children:[(0,t.jsx)(u.Z,{variant:"body1",color:"info.light",children:"Employee Email"}),(0,t.jsx)(u.Z,{variant:"body1",children:"".concat(C.issuedTo.email?C.issuedTo.email:"Not Available")})]})})]}),(0,t.jsx)(d.Z,{sx:{my:2,display:"flex",justifyContent:"flex-end",gap:"5px"},children:(0,t.jsx)(j.Z,{size:"small",variant:"contained",color:"secondary",startIcon:(0,t.jsx)(g.Z,{}),onClick:function(){return q.back()},children:"Go Back"})}),(0,t.jsx)(w,{open:L,toggleOpen:X,deleteDocument:Y,loading:S}),(0,t.jsx)(R,{name:"signedFile",allowedExt:[".pdf"],title:"Signed Document Upload",open:V,toggleOpen:$,handleUpload:W,loading:S})]})})}var U=r(1397),A=r(5591),M=function(e,n){var r=(0,A.ZP)(e?["".concat("/api/docs","/").concat(e),n]:null),t=r.data,i=r.error;return{details:t,isLoading:!i&&!t,isError:i}},Q=r(4461),Y="".concat("Flash"," : Document Details");function W(){var e,n=M((0,a.useRouter)().query.reqId,"Bearer ".concat(localStorage.getItem("galaxy-token"))),r=n.details,i=n.isLoading;return(n.isError,i)?(0,t.jsx)(Q.Z,{}):(0,t.jsx)(U.Z,{pageTitle:Y,children:(0,t.jsx)(V,{title:"Document Details",details:r})})}W.authRequired=!0}},function(e){e.O(0,[885,289,456,796,708,774,888,179],function(){return e(e.s=4977)}),_N_E=e.O()}]);