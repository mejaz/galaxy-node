"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[350],{7841:function(e,r,n){var t=n(8100),i=function(e,r){return fetch(e,{headers:{Authorization:r,"Content-type":"application/json"}}).then(function(e){return e.json()})};r.Z=function(e){var r=(0,t.ZP)(["/api/designations/",e],i),n=r.data,a=r.error;return{designations:n,isLoading:!a&&!n,isError:a}}},6167:function(e,r,n){n.d(r,{Z:function(){return u}});var t=n(6042),i=n(828),a=n(5893),l=n(7294),o=n(9243),s=n(2741),d=l.forwardRef(function(e,r){return(0,a.jsx)(s.Z,(0,t.Z)({elevation:6,ref:r,variant:"filled"},e))});function u(e){var r=e.severity,n=e.msg,t=e.isOpen,s=e.parentStateFunc,u=void 0===s?null:s,c=(0,i.Z)(l.useState(t),2),x=c[0],h=c[1];l.useEffect(function(){h(t)},[t]);var v=function(e,r){"clickaway"!==r&&(h(!1),u&&u(!1))};return(0,a.jsx)(o.Z,{open:x,onClose:v,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,a.jsx)(d,{onClose:v,severity:r,sx:{width:"100%"},children:n})})}},4461:function(e,r,n){n.d(r,{Z:function(){return l}});var t=n(5893);n(7294);var i=n(1953),a=n(754);function l(){return(0,t.jsx)(i.Z,{sx:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,t.jsx)(a.Z,{})})}},3850:function(e,r,n){n.d(r,{Z:function(){return o}});var t=n(5893);n(7294);var i=n(9837),a=n(9742),l=n(1359);function o(e){var r=e.title,n=e.children;return(0,t.jsxs)(i.Z,{sx:{width:"100%",pt:3},elevation:0,children:[(0,t.jsx)(a.Z,{title:r,sx:{color:"secondary.light"}}),(0,t.jsx)(l.Z,{sx:{width:"100%"},children:n})]})}n(2350),n(2697),n(3495),n(6186),n(7986),n(6167)},9358:function(e,r,n){n.d(r,{Z:function(){return w}});var t=n(7568),i=n(828),a=n(655),l=n(5893),o=n(7294),s=n(1953),d=n(9072),u=n(1448),c=n(2350),x=n(2697),h=n(3495),v=n(7274),f=n(4225),m=n(6186),Z=n(7986),j=n(4373),p=n(1812),g=n(1775),b=n(1092),y=n(8100),q=n(7536),C=n(6167),R=n(3850),S=n(7841),L=n(4461),V=[{key:"M",label:"Male"},{key:"F",label:"Female"},],P=function(e,r){return fetch(e,{headers:r}).then(function(e){return e.json()})};function w(e){var r=e.title,n=e.id,w=void 0===n?null:n,A=e.isEdit,F=void 0!==A&&A,E=e.defaultValues,D=void 0===E?{}:E,M=(0,i.Z)(o.useState([]),2),O=M[0],k=M[1],B=(0,i.Z)(o.useState("ARE"),2),I=B[0];B[1];var _=(0,i.Z)(o.useState("AFG"),2),N=_[0],K=_[1],z=(0,i.Z)(o.useState([]),2),Q=z[0],T=z[1],G=(0,i.Z)(o.useState([]),2),U=G[0],J=G[1],$=(0,i.Z)(o.useState(!1),2),W=$[0],H=$[1],X=(0,i.Z)(o.useState(D),2),Y=X[0];X[1];var ee=(0,i.Z)(o.useState(!1),2),er=ee[0],en=ee[1],et=(0,i.Z)(o.useState(!1),2),ei=et[0],ea=et[1],el=(0,i.Z)(o.useState(!1),2),eo=el[0],es=el[1],ed=(0,i.Z)(o.useState(!1),2),eu=ed[0],ec=ed[1],ex="Bearer ".concat(localStorage.getItem("galaxy-token")),eh=(0,S.Z)(ex),ev=eh.designations,ef=eh.isLoading;eh.isError;var em,eZ=(0,q.cI)({mode:"onTouched",defaultValues:Y}),ej=eZ.control,ep=eZ.handleSubmit,eg=eZ.reset,eb=eZ.formState.errors,ey=new b.Z,eq=ey.addMonths(ey.date(),-1440),eC=ey.addMonths(ey.date(),-180),eR=ey.addMonths(ey.date(),-72),eS=ey.date(),eL={Authorization:ex,"Content-type":"application/json"},eV=(0,y.ZP)(["/api/countries.json",eL],P),eP=eV.data;eV.error,o.useEffect(function(){eP&&(k(eP),K(eP[0].iso3),F&&K(D.permanentCountry))},[eP]),o.useEffect(function(){eP&&T(eP.filter(function(e){return e.iso3===I})[0].states)},[eP,I]),o.useEffect(function(){eP&&(console.log(N),J(eP.filter(function(e){return e.iso3===N})[0].states))},[eP,N]),o.useEffect(function(){F||eg()},[er]);var ew=(em=(0,t.Z)(function(e){var r,n,t;return(0,a.__generator)(this,function(i){switch(i.label){case 0:return H(!0),F?(n=new URLSearchParams({id:w}),r="".concat("/api/user/edit","?").concat(n)):r="/api/user/add",[4,fetch(r,{method:"POST",body:JSON.stringify(e),headers:eL})];case 1:if(!(t=i.sent()).ok)return[3,2];return ec(!0),en(function(e){return!e}),[3,4];case 2:return[4,t.json()];case 3:t=i.sent(),ea(!0),es(t.message),i.label=4;case 4:return H(!1),[2]}})}),function(e){return em.apply(this,arguments)});return ef?(0,l.jsx)(L.Z,{}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(R.Z,{title:r,children:(0,l.jsxs)(s.Z,{component:"form",sx:{mb:"0","& .MuiFormControl-root":{margin:"10px 0",width:"100%"}},onSubmit:ep(ew),noValidate:!0,autoComplete:"off",children:[(0,l.jsxs)(d.ZP,{container:!0,columnSpacing:4,children:[(0,l.jsxs)(d.ZP,{item:!0,xs:12,md:6,children:[(0,l.jsx)(c.Z,{id:"empId",label:"Employee Id",isRequired:!0,maxLength:10,control:ej,errors:eb,defaultValue:"",disable:F}),(0,l.jsx)(c.Z,{id:"firstName",label:"First Name",isRequired:!0,maxLength:50,control:ej,errors:eb,defaultValue:""}),(0,l.jsx)(c.Z,{id:"lastName",label:"Last Name",isRequired:!0,maxLength:50,control:ej,errors:eb,defaultValue:""}),(0,l.jsx)(x.Z,{id:"gender",label:"Gender",isRequired:!0,values:V,control:ej,errors:eb,defaultValue:"M"}),(0,l.jsx)(h.Z,{id:"dob",label:"D.O.B.",control:ej,minDate:eq,maxDate:eC,defaultValue:eC,isRequired:!0,errors:eb})]}),(0,l.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,l.jsxs)(v.Z,{sx:{height:"100%"},direction:"column",alignItems:"center",justifyContent:"center",spacing:2,m:0,children:[(0,l.jsx)(s.Z,{sx:{width:"220px",height:"200px",border:"1px solid",borderRadius:"5px",borderColor:"grey.400"}}),(0,l.jsxs)(f.Z,{variant:"contained",component:"label",children:["Upload Picture",(0,l.jsx)("input",{hidden:!0,accept:"image/*",type:"file"})]})]})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,l.jsx)(m.Z,{id:"primaryMobile",label:"Primary Mobile",adornVal:"+971",control:ej,isRequired:!0,errors:eb})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,l.jsx)(m.Z,{id:"secondaryMobile",label:"Secondary Mobile",adornVal:"+971",control:ej,isRequired:!1,errors:eb})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,l.jsx)(Z.Z,{id:"email",label:"Email",isRequired:!0,maxLength:100,control:ej,errors:eb,defaultValue:""})}),(0,l.jsx)(d.ZP,{item:!0,xs:6,children:(0,l.jsx)(x.Z,{id:"designation",label:"Designation",isRequired:!0,values:ev,valKey:"_id",valLabel:"name",control:ej,errors:eb})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,l.jsx)(h.Z,{id:"doj",label:"D.O.J.",control:ej,minDate:eR,maxDate:eS,defaultValue:eR,isRequired:!0,errors:eb})}),(0,l.jsx)(s.Z,{sx:{width:"100%",mt:3},children:(0,l.jsx)(j.Z,{textAlign:"center",children:(0,l.jsx)(u.Z,{label:"Local Address"})})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(c.Z,{id:"localAddress",label:"Local Address",isRequired:!0,maxLength:200,control:ej,errors:eb,defaultValue:""})}),(0,l.jsx)(d.ZP,{item:!0,xs:6,children:(0,l.jsx)(x.Z,{id:"localCountry",label:"Country",isRequired:!0,values:O,valKey:"iso3",valLabel:"name",control:ej,errors:eb,defaultValue:"ARE",isReadOnly:!0})}),(0,l.jsx)(d.ZP,{item:!0,xs:6,children:(0,l.jsx)(x.Z,{id:"localCity",label:"City",isRequired:!0,values:Q,valKey:"code",valLabel:"name",control:ej,errors:eb})}),(0,l.jsx)(s.Z,{sx:{width:"100%",mt:3},children:(0,l.jsx)(j.Z,{textAlign:"center",children:(0,l.jsx)(u.Z,{label:"Permanent Address"})})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(c.Z,{id:"permanentAddress",label:"Permanent Address",isRequired:!0,maxLength:200,control:ej,errors:eb,defaultValue:""})}),(0,l.jsx)(d.ZP,{item:!0,xs:6,children:(0,l.jsx)(x.Z,{id:"permanentCountry",label:"Country",isRequired:!0,valKey:"iso3",valLabel:"name",values:O,control:ej,errors:eb,defaultValue:"AFG",additionalOnChange:K})}),(0,l.jsx)(d.ZP,{item:!0,xs:6,children:(0,l.jsx)(x.Z,{id:"permanentCity",label:"City",isRequired:!0,valKey:"code",valLabel:"name",values:U,control:ej,errors:eb})})]}),(0,l.jsx)(s.Z,{sx:{textAlign:"right",my:2},children:(0,l.jsx)(p.Z,{loading:W,size:"small",variant:"contained",endIcon:(0,l.jsx)(g.Z,{}),loadingPosition:"end",type:"submit",children:F?"Update":"Submit"})})]})}),ei&&(0,l.jsx)(C.Z,{msg:eo,severity:"error",isOpen:ei,parentStateFunc:ea}),eu&&(0,l.jsx)(C.Z,{msg:"Form Submitted Successfully",severity:"success",isOpen:eu,parentStateFunc:ec})]})}},3495:function(e,r,n){n.d(r,{Z:function(){return x}});var t=n(6042),i=n(5893);n(7294);var a=n(5343),l=n(7836),o=n(7536),s=n(2359),d=n(3436),u=n(1092),c=n(7424);function x(e){var r,n=e.id,x=e.label,h=e.control,v=e.minDate,f=e.maxDate,m=e.errors,Z=e.isRequired,j=e.defaultValue;return(0,i.jsxs)(a.Z,{variant:"standard",children:[(0,i.jsx)(o.Qr,{control:h,name:n,rules:{required:Z},defaultValue:void 0===j?"":j,render:function(e){var r=e.field,n=r.onChange,a=r.value;return(0,i.jsx)(s._,{dateAdapter:u.Z,children:(0,i.jsx)(d.$,{label:x,inputFormat:"dd/MM/yyyy",value:a,onChange:n,minDate:v,maxDate:f,renderInput:function(e){return(0,i.jsx)(l.Z,(0,t.Z)({sx:{marginTop:"7px !important",marginBottom:"0px !important"},variant:"standard"},e))}})})}}),(null===(r=m[n])||void 0===r?void 0:r.type)==="required"&&(0,i.jsx)(c.Z,{text:"".concat(x," is Required")})]})}},7986:function(e,r,n){n.d(r,{Z:function(){return d}});var t=n(5893);n(7294);var i=n(5343),a=n(8316),l=n(6480),o=n(7424),s=n(7536);function d(e){var r,n,d=e.id,u=e.label,c=e.isRequired,x=e.maxLength,h=e.control,v=e.errors,f=e.defaultValue;return(0,t.jsxs)(i.Z,{variant:"standard",children:[(0,t.jsx)(a.Z,{htmlFor:d,required:c,children:u}),(0,t.jsx)(s.Qr,{name:d,control:h,rules:{required:c,maxLength:x},defaultValue:void 0===f?"":f,render:function(e){var r=e.field,n=r.onBlur,i=r.onChange,a=r.value;return(0,t.jsx)(l.Z,{id:d,value:a,onBlur:n,onChange:i})}}),(null===(r=v[d])||void 0===r?void 0:r.type)==="required"&&(0,t.jsx)(o.Z,{text:"".concat(u," is Required")}),(null===(n=v[d])||void 0===n?void 0:n.type)==="maxLength"&&(0,t.jsx)(o.Z,{text:"Cannot be more than ".concat(x," chars")})]})}},2350:function(e,r,n){n.d(r,{Z:function(){return u}});var t=n(5893);n(7294);var i=n(5343),a=n(8316),l=n(6480),o=n(2631),s=n(7424),d=n(7536);function u(e){var r,n,u=e.id,c=e.label,x=e.isRequired,h=e.maxLength,v=e.control,f=e.errors,m=e.defaultValue,Z=e.disable,j=void 0!==Z&&Z,p=e.placeholder,g=void 0===p?"":p,b=e.helperText,y=void 0===b?"":b;return(0,t.jsxs)(i.Z,{variant:"standard",children:[(0,t.jsx)(a.Z,{htmlFor:u,required:x,children:c}),(0,t.jsx)(d.Qr,{name:u,control:v,rules:{required:x,maxLength:h},defaultValue:void 0===m?"":m,render:function(e){var r=e.field,n=r.onBlur,i=r.onChange,a=r.value;return(0,t.jsx)(l.Z,{id:u,value:a,onBlur:n,onChange:i,disabled:j,placeholder:g})}}),y&&(0,t.jsx)(o.Z,{id:"filled-weight-helper-text",children:y}),f&&(null===(r=f[u])||void 0===r?void 0:r.type)==="required"&&(0,t.jsx)(s.Z,{text:"".concat(c," is Required")}),f&&(null===(n=f[u])||void 0===n?void 0:n.type)==="maxLength"&&(0,t.jsx)(s.Z,{text:"Cannot be more than ".concat(h," chars")})]})}},6186:function(e,r,n){n.d(r,{Z:function(){return u}});var t=n(5893);n(7294);var i=n(5343),a=n(8316),l=n(6480),o=n(9041),s=n(7424),d=n(7536);function u(e){var r,n,u,c=e.id,x=e.label,h=e.isRequired,v=e.maxLength,f=e.control,m=e.errors,Z=e.defaultValue,j=e.adornVal,p=void 0===j?"":j;return(0,t.jsxs)(i.Z,{variant:"standard",children:[(0,t.jsx)(a.Z,{htmlFor:c,required:h,children:x}),(0,t.jsx)(d.Qr,{name:c,control:f,rules:{required:h,maxLength:v,validate:{isDigits:function(e){return!e||/^\d+$/.test(e)}}},defaultValue:void 0===Z?"":Z,render:function(e){var r=e.field,n=r.onBlur,i=r.onChange,a=r.value;return(0,t.jsx)(l.Z,{id:c,value:a,onBlur:n,onChange:i,startAdornment:(0,t.jsx)(o.Z,{position:"start",children:p})})}}),(null===(r=m[c])||void 0===r?void 0:r.type)==="required"&&(0,t.jsx)(s.Z,{text:"".concat(x," is Required")}),(null===(n=m[c])||void 0===n?void 0:n.type)==="maxLength"&&(0,t.jsx)(s.Z,{text:"Cannot be more than ".concat(v," chars")}),(null===(u=m[c])||void 0===u?void 0:u.type)==="isDigits"&&(0,t.jsx)(s.Z,{text:"Only digits allowed"})]})}},2697:function(e,r,n){n.d(r,{Z:function(){return u}});var t=n(5893);n(7294);var i=n(5343),a=n(8316),l=n(6541),o=n(7424),s=n(7536),d=n(1538);function u(e){var r,n=e.id,u=e.label,c=e.isRequired,x=e.values,h=e.control,v=e.errors,f=e.valKey,m=void 0===f?"key":f,Z=e.valLabel,j=void 0===Z?"label":Z,p=e.isReadOnly,g=void 0!==p&&p,b=e.defaultValue,y=e.additionalOnChange,q=void 0===y?null:y;return(0,t.jsxs)(i.Z,{variant:"standard",sx:{m:1,minWidth:120},children:[(0,t.jsx)(a.Z,{id:n,required:c,children:u}),(0,t.jsx)(s.Qr,{name:n,control:h,rules:{required:c},defaultValue:void 0===b?"":b,render:function(e){var r=e.field,i=r.onChange,a=(r.onBlur,r.value);return(0,t.jsx)(l.Z,{id:n,value:a,onChange:function(e){q?(i(e),q(e.target.value)):i(e)},disabled:g,children:x.map(function(e){return(0,t.jsx)(d.Z,{value:e[m],children:e[j]},e[m])})})}}),(null===(r=v[n])||void 0===r?void 0:r.type)==="required"&&(0,t.jsx)(o.Z,{text:"".concat(u," is Required")})]})}},7424:function(e,r,n){n.d(r,{Z:function(){return l}});var t=n(5893);n(7294);var i=n(9630),a=n(1953);function l(e){var r=e.text;return(0,t.jsx)(i.Z,{component:"span",children:(0,t.jsx)(a.Z,{sx:{color:"error.main",fontSize:"12px",paddingTop:"1px"},children:r})})}}}]);