"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[382],{7841:function(e,r,t){var n=t(5591);r.Z=function(e){var r,t=(0,n.ZP)(["/api/designations/",e]),i=t.data;return{designations:i,isLoading:!t.error&&!i,mutate:t.mutate}}},3850:function(e,r,t){t.d(r,{Z:function(){return s}});var n=t(5893);t(7294);var i=t(9837),a=t(9742),l=t(1359);function s(e){var r=e.title,t=e.children;return(0,n.jsxs)(i.Z,{sx:{width:"100%",pt:3},elevation:0,children:[(0,n.jsx)(a.Z,{title:r,sx:{color:"secondary.light"}}),(0,n.jsx)(l.Z,{sx:{width:"100%"},children:t})]})}t(2350),t(2697),t(3495),t(6186),t(7986),t(1281)},1397:function(e,r,t){t.d(r,{Z:function(){return d}});var n=t(5893);t(7294);var i=t(4288),a=t(9008),l=t.n(a),s=t(9072);function d(e){var r=e.pageTitle,t=e.children,a=e.sideComponent;return(0,n.jsxs)(i.Z,{maxWidth:"xxl",children:[(0,n.jsxs)(l(),{children:[(0,n.jsx)("title",{children:r}),(0,n.jsx)("meta",{name:"description",content:"Office home"})]}),(0,n.jsxs)(s.ZP,{container:!0,children:[(0,n.jsx)(s.ZP,{item:!0,xs:12,md:12,lg:9,children:t}),(0,n.jsx)(s.ZP,{item:!0,xs:12,md:12,lg:3,children:void 0===a?null:a})]})]})}},9935:function(e,r,t){t.d(r,{Z:function(){return _}});var n=t(7568),i=t(6042),a=t(9396),l=t(603),s=t(655),d=t(5893),o=t(7294),u=t(1953),c=t(9072),x=t(1448),m=t(2350),h=t(2697),v=t(3495),Z=t(7274),f=t(4225),j=t(6186),p=t(7986),g=t(4373),b=t(1812),y=t(1775),q=t(1092),C=t(5591),L=t(7536),R=t(3850),A=t(7841),P=t(4461),V=t(5343),S=t(2841),w=t(1362),D=t(2631);function E(e){var r=e.id,t=e.label,n=e.control,i=(e.errors,e.defaultValue),a=(e.isRequired,e.disable,e.helperText),l=void 0===a?"":a,s=e.additionalOnChange,o=void 0===s?null:s;return(0,d.jsxs)(V.Z,{variant:"standard",children:[(0,d.jsx)(L.Qr,{name:r,control:n,defaultValue:void 0===i||i,render:function(e){var n=e.field,i=n.onBlur,a=n.onChange,l=n.value;return(0,d.jsx)(S.Z,{id:r,value:l,onBlur:i,onChange:function(e){o?(a(e),o()):a(e)},control:(0,d.jsx)(w.Z,{checked:l}),label:t})}}),l&&(0,d.jsx)(D.Z,{id:"filled-weight-helper-text",children:l})]})}t(7424);var k=t(4334),O=t(9534);function B(){return(B=(0,n.Z)(function(e,r){var t,n,i,a,l,d,o,u,c,x;return(0,s.__generator)(this,function(s){switch(s.label){case 0:return n=(t=r.arg).id,i=t.isEdit,a=(0,O.Z)(t,["id","isEdit"]),l="/api/user/add",i&&(d=new URLSearchParams({id:n}),l="".concat("/api/user/edit","?").concat(d)),o={Authorization:e,"Content-type":"application/json"},[4,fetch(l,{method:"POST",body:JSON.stringify(a),headers:o})];case 1:if(!(u=s.sent()).ok)return[3,2];return[2,u];case 2:if(401!==u.status)return[3,3];throw(c=Error("Not authorized")).status=401,c;case 3:return(x=Error("")).status=u.status,[4,u.json()];case 4:throw x.message=s.sent().message,x;case 5:return[2]}})})).apply(this,arguments)}var M=function(e,r){return B.apply(this,arguments)},N=[{key:"M",label:"Male"},{key:"F",label:"Female"},];function _(e){var r=e.title,t=e.id,V=void 0===t?null:t,S=e.isEdit,w=void 0!==S&&S,D=e.defaultValues,O=void 0===D?{}:D,B=e.mutate,_=(0,l.Z)(o.useState([]),2),F=_[0],I=_[1],K=(0,l.Z)(o.useState("ARE"),2),T=K[0];K[1];var Q=(0,l.Z)(o.useState(""),2),z=Q[0],U=Q[1],W=(0,l.Z)(o.useState([]),2),J=W[0],$=W[1],G=(0,l.Z)(o.useState([]),2),H=G[0],X=G[1],Y=(0,l.Z)(o.useState(!1),2),ee=Y[0],er=Y[1],et=(0,l.Z)(o.useState(O),2),en=et[0];et[1];var ei=(0,l.Z)(o.useState(!("isActive"in en)||en.isActive),2),ea=ei[0],el=ei[1],es="Bearer ".concat(localStorage.getItem("galaxy-token")),ed=(0,A.Z)(es),eo=ed.designations,eu=ed.isLoading;ed.isError;var ec,ex=(0,k.Z)(es,M).trigger,em=(0,L.cI)({mode:"onTouched",defaultValues:Object.keys(en).length>0?(0,a.Z)((0,i.Z)({},en),{localAddress:en.localAddress?en.localAddress.streetAddress:"",localCountry:en.localAddress?en.localAddress.country:"",localCity:en.localAddress?en.localAddress.city:"",permanentAddress:en.permanentAddress?en.permanentAddress.streetAddress:"",permanentCountry:en.permanentAddress?en.permanentAddress.country:"",permanentCity:en.permanentAddress?en.permanentAddress.city:""}):{}}),eh=em.control,ev=em.handleSubmit,eZ=em.reset,ef=em.formState.errors,ej=new q.Z,ep=ej.addMonths(ej.date(),-1440),eg=ej.addMonths(ej.date(),-180),eb=ej.date(new Date(2016,0,1)),ey=ej.date(),eq=(0,C.ZP)(["/api/countries.json"]),eC=eq.data;eq.error,o.useEffect(function(){eC&&(I(eC),U(eC[0].iso3),w&&U(O.permanentAddress&&O.permanentAddress.country))},[eC]),o.useEffect(function(){eC&&$(eC.filter(function(e){return e.iso3===T})[0].states)},[eC,T]),o.useEffect(function(){eC&&z&&(console.log(z),X(eC.filter(function(e){return e.iso3===z})[0].states))},[eC,z]);var eL=(ec=(0,n.Z)(function(e){return(0,s.__generator)(this,function(r){switch(r.label){case 0:er(!0),r.label=1;case 1:return r.trys.push([1,3,,4]),ea&&delete e.lwd,e=(0,a.Z)((0,i.Z)({},e),{isEdit:w,id:V}),[4,ex(e)];case 2:return r.sent(),w||eZ(),B(),[3,4];case 3:return r.sent(),console.error("error saving details"),[3,4];case 4:return er(!1),[2]}})}),function(e){return ec.apply(this,arguments)});return eu?(0,d.jsx)(P.Z,{}):(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(R.Z,{title:r,children:(0,d.jsxs)(u.Z,{component:"form",sx:{mb:"0","& .MuiFormControl-root":{margin:"10px 0",width:"100%"}},onSubmit:ev(eL),noValidate:!0,autoComplete:"off",children:[(0,d.jsxs)(c.ZP,{container:!0,columnSpacing:4,children:[(0,d.jsxs)(c.ZP,{item:!0,xs:12,md:6,children:[(0,d.jsx)(m.Z,{id:"empId",label:"Employee Id",isRequired:!0,maxLength:10,control:eh,errors:ef,defaultValue:"",disable:w}),(0,d.jsx)(m.Z,{id:"firstName",label:"First Name",isRequired:!0,maxLength:50,control:eh,errors:ef,defaultValue:""}),(0,d.jsx)(m.Z,{id:"lastName",label:"Last Name",isRequired:!0,maxLength:50,control:eh,errors:ef,defaultValue:""}),(0,d.jsx)(h.Z,{id:"gender",label:"Gender",isRequired:!0,values:N,control:eh,errors:ef,defaultValue:"M"}),(0,d.jsx)(h.Z,{id:"designation",label:"Designation",isRequired:!0,values:eo,valKey:"_id",valLabel:"name",control:eh,errors:ef,emptyLabel:"Select Designation"})]}),(0,d.jsx)(c.ZP,{item:!0,xs:12,md:6,children:(0,d.jsxs)(Z.Z,{sx:{height:"100%"},direction:"column",alignItems:"center",justifyContent:"center",spacing:2,m:0,children:[(0,d.jsx)(u.Z,{sx:{width:"220px",height:"200px",border:"1px solid",borderRadius:"5px",borderColor:"grey.400"}}),(0,d.jsxs)(f.Z,{variant:"contained",component:"label",children:["Upload Picture",(0,d.jsx)("input",{hidden:!0,accept:"image/*",type:"file"})]})]})}),(0,d.jsx)(c.ZP,{item:!0,xs:12,md:6,children:(0,d.jsx)(v.Z,{id:"doj",label:"D.O.J.",control:eh,minDate:eb,maxDate:ey,defaultValue:eb,isRequired:!0,errors:ef})}),(0,d.jsx)(c.ZP,{item:!0,xs:12,md:6,children:(0,d.jsxs)(c.ZP,{container:!0,justifyContent:"center",alignItems:"center",children:[(0,d.jsx)(c.ZP,{item:!0,xs:12,md:3,children:(0,d.jsx)(E,{id:"isActive",label:"Employee Active?",isRequired:!0,control:eh,errors:ef,defaultValue:!0,additionalOnChange:function(){return el(function(e){return!e})}})}),(0,d.jsx)(c.ZP,{item:!0,xs:12,md:9,children:(0,d.jsx)(v.Z,{id:"lwd",label:"Last Working Date",control:eh,minDate:eb,maxDate:ey,defaultValue:eb,isRequired:!ea,errors:ef,disabled:ea})})]})}),(0,d.jsx)(c.ZP,{item:!0,xs:12,md:6,children:(0,d.jsx)(h.Z,{id:"nationality",label:"Nationality",isRequired:!0,valKey:"iso3",valLabel:"name",values:F,control:eh,errors:ef,defaultValue:"",emptyLabel:"Select Nationality"})}),(0,d.jsx)(c.ZP,{item:!0,xs:12,md:6,children:(0,d.jsx)(m.Z,{id:"passNo",label:"Passport Number",isRequired:!0,maxLength:50,control:eh,errors:ef,defaultValue:""})}),(0,d.jsx)(g.Z,{sx:{width:"100%",my:5}}),(0,d.jsx)(c.ZP,{item:!0,xs:12,md:6,children:(0,d.jsx)(j.Z,{id:"primaryMobile",label:"Primary Mobile",adornVal:"+971",control:eh,isRequired:!1,errors:ef})}),(0,d.jsx)(c.ZP,{item:!0,xs:12,md:6,children:(0,d.jsx)(j.Z,{id:"secondaryMobile",label:"Secondary Mobile",adornVal:"+971",control:eh,isRequired:!1,errors:ef})}),(0,d.jsx)(c.ZP,{item:!0,xs:12,md:6,children:(0,d.jsx)(p.Z,{id:"email",label:"Email",isRequired:!1,maxLength:100,control:eh,errors:ef,defaultValue:""})}),(0,d.jsx)(c.ZP,{item:!0,xs:12,md:6,children:(0,d.jsx)(v.Z,{id:"dob",label:"D.O.B.",control:eh,minDate:ep,maxDate:eg,defaultValue:null,isRequired:!1,errors:ef})}),(0,d.jsx)(u.Z,{sx:{width:"100%",mt:5,mb:3},children:(0,d.jsx)(g.Z,{textAlign:"center",children:(0,d.jsx)(x.Z,{label:"Local Address",sx:{color:"secondary.light",bgcolor:"transparent"}})})}),(0,d.jsx)(c.ZP,{item:!0,xs:12,children:(0,d.jsx)(m.Z,{id:"localAddress",label:"Local Address",isRequired:!1,maxLength:200,control:eh,errors:ef,defaultValue:""})}),(0,d.jsx)(c.ZP,{item:!0,xs:6,children:(0,d.jsx)(h.Z,{id:"localCountry",label:"Country",isRequired:!1,values:F,valKey:"iso3",valLabel:"name",control:eh,errors:ef,defaultValue:"ARE",isReadOnly:!0,emptyLabel:"Select Country"})}),(0,d.jsx)(c.ZP,{item:!0,xs:6,children:(0,d.jsx)(h.Z,{id:"localCity",label:"City",isRequired:!1,values:J,valKey:"code",valLabel:"name",control:eh,errors:ef,emptyLabel:"Select City"})}),(0,d.jsx)(u.Z,{sx:{width:"100%",mt:5,mb:3},children:(0,d.jsx)(g.Z,{textAlign:"center",children:(0,d.jsx)(x.Z,{label:"Permanent Address",sx:{color:"secondary.light",bgcolor:"transparent"}})})}),(0,d.jsx)(c.ZP,{item:!0,xs:12,children:(0,d.jsx)(m.Z,{id:"permanentAddress",label:"Permanent Address",isRequired:!1,maxLength:200,control:eh,errors:ef,defaultValue:""})}),(0,d.jsx)(c.ZP,{item:!0,xs:6,children:(0,d.jsx)(h.Z,{id:"permanentCountry",label:"Country",isRequired:!1,valKey:"iso3",valLabel:"name",values:F,control:eh,errors:ef,defaultValue:"",additionalOnChange:U,emptyLabel:"Select Country"})}),(0,d.jsx)(c.ZP,{item:!0,xs:6,children:(0,d.jsx)(h.Z,{id:"permanentCity",label:"City",isRequired:!1,valKey:"code",valLabel:"name",values:H,control:eh,errors:ef,emptyLabel:"Select City"})})]}),(0,d.jsx)(u.Z,{sx:{textAlign:"right",my:2},children:(0,d.jsx)(b.Z,{loading:ee,size:"small",variant:"contained",endIcon:(0,d.jsx)(y.Z,{}),loadingPosition:"end",type:"submit",children:w?"Update":"Submit"})})]})})})}},3495:function(e,r,t){t.d(r,{Z:function(){return x}});var n=t(6042),i=t(5893);t(7294);var a=t(5343),l=t(7836),s=t(7536),d=t(2359),o=t(3436),u=t(1092),c=t(7424);function x(e){var r,t=e.id,x=e.label,m=e.control,h=e.minDate,v=e.maxDate,Z=e.errors,f=e.isRequired,j=e.defaultValue,p=e.disabled,g=void 0!==p&&p;return(0,i.jsxs)(a.Z,{variant:"standard",children:[(0,i.jsx)(s.Qr,{control:m,name:t,rules:{required:f},defaultValue:void 0===j?"":j,render:function(e){var r=e.field,t=r.onChange,a=r.value;return(0,i.jsx)(d._,{dateAdapter:u.Z,children:(0,i.jsx)(o.$,{disabled:g,label:x,inputFormat:"dd/MM/yyyy",value:a,onChange:t,minDate:h,maxDate:v,renderInput:function(e){return(0,i.jsx)(l.Z,(0,n.Z)({required:f,sx:{marginTop:"1px !important",marginBottom:"0px !important"},variant:"standard"},e))}})})}}),(null===(r=Z[t])||void 0===r?void 0:r.type)==="required"&&(0,i.jsx)(c.Z,{text:"".concat(x," is Required")})]})}},7986:function(e,r,t){t.d(r,{Z:function(){return o}});var n=t(5893);t(7294);var i=t(5343),a=t(8316),l=t(6480),s=t(7424),d=t(7536);function o(e){var r,t,o=e.id,u=e.label,c=e.isRequired,x=e.maxLength,m=e.control,h=e.errors,v=e.defaultValue;return(0,n.jsxs)(i.Z,{variant:"standard",children:[(0,n.jsx)(a.Z,{htmlFor:o,required:c,children:u}),(0,n.jsx)(d.Qr,{name:o,control:m,rules:{required:c,maxLength:x},defaultValue:void 0===v?"":v,render:function(e){var r=e.field,t=r.onBlur,i=r.onChange,a=r.value;return(0,n.jsx)(l.Z,{id:o,value:a,onBlur:t,onChange:i})}}),(null===(r=h[o])||void 0===r?void 0:r.type)==="required"&&(0,n.jsx)(s.Z,{text:"".concat(u," is Required")}),(null===(t=h[o])||void 0===t?void 0:t.type)==="maxLength"&&(0,n.jsx)(s.Z,{text:"Cannot be more than ".concat(x," chars")})]})}},2350:function(e,r,t){t.d(r,{Z:function(){return u}});var n=t(5893);t(7294);var i=t(5343),a=t(8316),l=t(6480),s=t(2631),d=t(7424),o=t(7536);function u(e){var r,t,u=e.id,c=e.label,x=e.isRequired,m=e.maxLength,h=e.control,v=e.errors,Z=e.defaultValue,f=e.disable,j=void 0!==f&&f,p=e.placeholder,g=void 0===p?"":p,b=e.helperText,y=void 0===b?"":b;return(0,n.jsxs)(i.Z,{variant:"standard",children:[(0,n.jsx)(a.Z,{htmlFor:u,required:x,children:c}),(0,n.jsx)(o.Qr,{name:u,control:h,rules:{required:x,maxLength:m},defaultValue:void 0===Z?"":Z,render:function(e){var r=e.field,t=r.onBlur,i=r.onChange,a=r.value;return(0,n.jsx)(l.Z,{id:u,value:a,onBlur:t,onChange:i,disabled:j,placeholder:g})}}),y&&(0,n.jsx)(s.Z,{id:"filled-weight-helper-text",children:y}),v&&(null===(r=v[u])||void 0===r?void 0:r.type)==="required"&&(0,n.jsx)(d.Z,{text:"".concat(c," is Required")}),v&&(null===(t=v[u])||void 0===t?void 0:t.type)==="maxLength"&&(0,n.jsx)(d.Z,{text:"Cannot be more than ".concat(m," chars")})]})}},6186:function(e,r,t){t.d(r,{Z:function(){return u}});var n=t(5893);t(7294);var i=t(5343),a=t(8316),l=t(6480),s=t(9041),d=t(7424),o=t(7536);function u(e){var r,t,u,c=e.id,x=e.label,m=e.isRequired,h=e.maxLength,v=e.control,Z=e.errors,f=e.defaultValue,j=e.adornVal,p=void 0===j?"":j;return(0,n.jsxs)(i.Z,{variant:"standard",children:[(0,n.jsx)(a.Z,{htmlFor:c,required:m,children:x}),(0,n.jsx)(o.Qr,{name:c,control:v,rules:{required:m,maxLength:h,validate:{isDigits:function(e){return!e||/^\d+$/.test(e)}}},defaultValue:void 0===f?"":f,render:function(e){var r=e.field,t=r.onBlur,i=r.onChange,a=r.value;return(0,n.jsx)(l.Z,{id:c,value:a,onBlur:t,onChange:i,startAdornment:(0,n.jsx)(s.Z,{position:"start",children:p})})}}),(null===(r=Z[c])||void 0===r?void 0:r.type)==="required"&&(0,n.jsx)(d.Z,{text:"".concat(x," is Required")}),(null===(t=Z[c])||void 0===t?void 0:t.type)==="maxLength"&&(0,n.jsx)(d.Z,{text:"Cannot be more than ".concat(h," chars")}),(null===(u=Z[c])||void 0===u?void 0:u.type)==="isDigits"&&(0,n.jsx)(d.Z,{text:"Only digits allowed"})]})}},2697:function(e,r,t){t.d(r,{Z:function(){return u}});var n=t(5893);t(7294);var i=t(5343),a=t(8316),l=t(6541),s=t(7424),d=t(7536),o=t(1538);function u(e){var r,t=e.id,u=e.label,c=e.isRequired,x=e.values,m=e.control,h=e.errors,v=e.valKey,Z=void 0===v?"key":v,f=e.valLabel,j=void 0===f?"label":f,p=e.isReadOnly,g=void 0!==p&&p,b=e.defaultValue,y=e.additionalOnChange,q=void 0===y?null:y,C=e.emptyLabel,L=void 0===C?null:C;return(0,n.jsxs)(i.Z,{variant:"standard",sx:{m:1,minWidth:120},children:[(0,n.jsx)(a.Z,{shrink:!0,id:t,required:c,children:u}),(0,n.jsx)(d.Qr,{name:t,control:m,rules:{required:c},defaultValue:void 0===b?"":b,render:function(e){var r=e.field,i=r.onChange,a=(r.onBlur,r.value);return(0,n.jsxs)(l.Z,{id:t,value:a,displayEmpty:!0,onChange:function(e){q?(i(e),q(e.target.value)):i(e)},disabled:g,children:[(0,n.jsx)(o.Z,{value:"",children:(0,n.jsx)("em",{children:L||"Select"})}),x&&x.map(function(e){return(0,n.jsx)(o.Z,{value:e[Z],children:e[j]},e[Z])})]})}}),(null===(r=h[t])||void 0===r?void 0:r.type)==="required"&&(0,n.jsx)(s.Z,{text:"".concat(u," is Required")})]})}},7424:function(e,r,t){t.d(r,{Z:function(){return l}});var n=t(5893);t(7294);var i=t(9630),a=t(1953);function l(e){var r=e.text;return(0,n.jsx)(i.Z,{component:"span",children:(0,n.jsx)(a.Z,{sx:{color:"error.main",fontSize:"12px",paddingTop:"1px"},children:r})})}}}]);